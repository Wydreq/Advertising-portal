<h1>Purchased items</h1>
<h2 *ngIf="purchasedItems && purchasedItems.length === 0">No items found</h2>
<h3>Active items</h3>
<p-accordion class="accordion">
  <ng-container *ngFor="let item of purchasedItems">
    <p-accordionTab *ngIf="item.status !== 'delivered'">
      <ng-template pTemplate="header">
        <span class="flex align-items-center gap-2 w-full" class="headerCont">
          <p-avatar image="{{ item.offer.photo }}" shape="circle" />
          <span class="font-bold white-space-nowrap">{{
            item.offer.name
          }}</span>
          <p-badge *ngIf="item.status === 'new'" value="New" class="badge" />
          <p-badge
            *ngIf="item.status === 'delivery'"
            value="On delivery"
            class="badge"
            severity="warning"
          />
          <p-badge
            *ngIf="item.status === 'delivered'"
            value="Delivered"
            class="badge"
            severity="success"
          />
        </span>
      </ng-template>
      <p class="m-0">
        {{ item.offer.description }}
      </p>
      <p>Sold price: {{ item.totalPrice }}$</p>
      <p>
        Delivery address: {{ item.deliveryAddress.street }}
        {{ item.deliveryAddress.houseNumber }},
        {{ item.deliveryAddress.postalCode }} {{ item.deliveryAddress.city }},
        {{ item.deliveryAddress.country }}
      </p>
      <button
        *ngIf="item.status === 'delivery'"
        label="Confirm the item has been delivered"
        type="button"
        pButton
        class="p-button-success"
        (click)="setItemDelivered(item._id)"
      ></button>
    </p-accordionTab>
  </ng-container>
</p-accordion>

<h3>History</h3>
<p-accordion class="accordion">
  <ng-container *ngFor="let item of purchasedItems">
    <p-accordionTab *ngIf="item.status === 'delivered'">
      <ng-template pTemplate="header">
        <span class="flex align-items-center gap-2 w-full" class="headerCont">
          <p-avatar image="{{ item.offer.photo }}" shape="circle" />
          <span class="font-bold white-space-nowrap">{{
            item.offer.name
          }}</span>
          <p-badge *ngIf="item.status === 'new'" value="New" class="badge" />
          <p-badge
            *ngIf="item.status === 'delivery'"
            value="On delivery"
            class="badge"
            severity="warning"
          />
          <p-badge
            *ngIf="item.status === 'delivered'"
            value="Delivered"
            class="badge"
            severity="success"
          />
        </span>
      </ng-template>
      <p class="m-0">
        {{ item.offer.description }}
      </p>
      <p>Sold price: {{ item.totalPrice }}$</p>
      <p>
        Delivery address: {{ item.deliveryAddress.street }}
        {{ item.deliveryAddress.houseNumber }},
        {{ item.deliveryAddress.postalCode }} {{ item.deliveryAddress.city }},
        {{ item.deliveryAddress.country }}
      </p>
    </p-accordionTab>
  </ng-container>
</p-accordion>
